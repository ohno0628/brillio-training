# Infrastructure as Code(IaC) とは

## 概要
**Infrastructure as Code (IaC)** とは、サーバー・ネットワーク・ストレージなどのインフラ環境を、プログラムコードや設定ファイルによって管理・構築する手法  
これにより、手動作業で環境を構築・設定するのではなく、コードをバージョン管理したり、自動的に再現・変更したりできるようになる。

## なぜIaCが必要なのか？

- **手動作業が多い**：  
  作業者がコンソールをポチポチ操作したり、手順書を見ながらコマンドを実行するため、時間がかかり、オペレーションミスが発生しやすい。ミスが発生するたびに様々な人員コストがかかりみんな不幸になります。。。
  
- **再現性の確保が難しい**：  
  同じ環境を再度構築する際、正確に同じ状態を再現しづらい。
  謎のファイルがあったり、管理されてない設定値等が潜んでることが多々あります。
  
- **変更履歴の管理が困難**：  
  設定変更を行っても、誰がいつ何を変えたのか、バージョン管理が難しく、過去に戻すことも容易ではない。

IaCを導入することで、これらの問題を解消しましょうが思想と思われます。

## IaCのメリット
1. **再現性・信頼性**：  
   コードに環境の状態が明記されているため、同じコードを`apply`すれば同じ環境が再現可能。

2. **効率化と自動化**：  
   コードを用いてインフラを構築するため、自動化パイプライン（CI/CD）やスクリプトと組み合わせることで、迅速なセットアップが可能。

3. **バージョン管理・監査性**：  
   Gitなどのバージョン管理ツールでIaCコードを管理することで、いつ・誰が・何を変更したかが明確に残り、過去のバージョンへのロールバックも容易。

4. **拡張性**：  
   コードで環境を定義するため、数台から数百台への拡張も同様の手順で実行でき、スケールアウト・スケールインが容易。

## 主なIaCツール例
大きく分けて、インフラリソースそのものを管理するツールとソフトウェアのインストールや設定を得意とする構成管理ツールに分けれらる。

- **Terraform**：  
  クラウドベンダー（AWS、GCP、Azure）やSaaS、オンプレ機器など様々なリソースを一元的に管理可能なツール

- **CloudFormation(AWS)**：  
AWSリソースをYAML/JSONで定義し、AWS環境の構築を自動化。AWS環境のみの場合CFnを選択してよいかと

- **Ansible**：  
  サーバのパッケージインストールや設定ファイル、ミドルウェアのセットアップなど構成管理ツール。エージェントレス動作。

- **Packer**：  
  仮想マシンイメージ（AMIなど）の自動ビルドツール。インフラ自動構築前のベースイメージ作りに役立つ。



## まとめ
あまりにもメリットが大きく環境がよほど固定されているや、小規模システム、一時的なシステム、IaC人員がいない等なければだいたいのシステムでIaCを導入しているのではと思います。



